@page "/patients"
@using FhirBlaze.SharedComponents
@using FhirBlaze.PatientModule.Components

<button @onclick="NavigateToPatientDashboard" class="btn btn-primary">Back</button>
<br />
<div class="badge-list">
    <span style="badge-list-first"> Live Filters: </span>
    @if (@Filters.StartDate != DateTime.MinValue)
    {
        <span style="badge-list-middle">Start Date | </span>
    }
    @if (@Filters.EndDate != DateTime.MinValue)
    {
        <span style="badge-list-middle">End Date | </span>
    }
    @if (Filters.FhirId != null)
    {
        <span style="badge-list-middle">ID | </span>
    }
    @if (Filters.FirstName != null)
    {
        <span style="badge-list-middle">First Name | </span>
    }
    @if (Filters.LastName != null)
    {
        <span style="badge-list-middle">Last Name | </span>
    }
</div>
<br />
<div class="container">
    <div class="row">
        <div class="col">
            <div class="card text-center">
                <div class="card-header bg-dark text-white ">FHIR Records</div>
                <div class="card-body">
                    <h3><span class="badge bg-secondary text-white">@FhirCount</span></h3>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="card text-center">
                <div class="card-header bg-dark text-white ">Dataverse Records</div>
                <div class="card-body">
                    <h3><span class="badge bg-secondary text-white">@DVCount</span></h3>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <h3>Compare Patients</h3>
    </div>
    <div class="row overflow-scroll">
        @if (Loading)
        {
            <LoadingSpinner />
        }
        else
        {
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover">
                    <thead class="thead-dark">
                        <tr>
                            <th scope="col" rowspan="2" class="text-center" style="vertical-align: middle">Actions</th>
                            <th scope="col" rowspan="2" class="text-center" style="vertical-align: middle">Id</th>
                            <th scope="col" colspan="2" class="text-center">FirstName</th>
                            <th scope="col" colspan="2" class="text-center">LastName</th>
                            <th scope="col" colspan="2" class="text-center">DateOfBirth</th>
                            <th scope="col" colspan="2" class="text-center">Address 1 Line 1</th>
                            <th scope="col" colspan="2" class="text-center">Address 1 City</th>
                            <th scope="col" colspan="2" class="text-center">Address 1 Country</th>
                            <th scope="col" colspan="2" class="text-center">Address 1 State Province</th>
                            <th scope="col" colspan="2" class="text-center">GenderCode</th>
                            <th scope="col" colspan="2" class="text-center">FamilyStatusCode</th>
                            <th scope="col" colspan="2" class="text-center">LastUpdatedOn</th>
                            <th scope="col" colspan="2" class="text-center">FhirVersion</th>
                            <th scope="col" colspan="2" class="text-center">Telephone2</th>
                        </tr>
                        <tr>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                            <th scope="col">FHIR</th>
                            <th scope="col">Dataverse</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var patientPair in Patients)
                        {
                            <tr>
                                <th scope="row"><button @onclick="@(e => NavigateToPatientDetail(e, patientPair.Item1?.Id))" class="btn btn-primary"><span class="oi oi-magnifying-glass"></span></button></th>
                                <th scope="row">@patientPair.Item1?.Id</th>
                                <th>@patientPair.Item1?.FirstName</th>
                                <th>@patientPair.Item2?.FirstName</th>
                                <th>@patientPair.Item1?.LastName</th>
                                <th>@patientPair.Item2?.LastName</th>
                                <th>@patientPair.Item1?.DateOfBirth</th>
                                <th>@patientPair.Item2?.DateOfBirth</th>
                                <th>@patientPair.Item1?.Address1Line1</th>
                                <th>@patientPair.Item2?.Address1Line1</th>
                                <th>@patientPair.Item1?.Address1City</th>
                                <th>@patientPair.Item2?.Address1City</th>
                                <th>@patientPair.Item1?.Address1Country</th>
                                <th>@patientPair.Item2?.Address1Country</th>
                                <th>@patientPair.Item1?.Address1StateProvince</th>
                                <th>@patientPair.Item2?.Address1StateProvince</th>
                                <th>@patientPair.Item1?.GenderCode</th>
                                <th>@patientPair.Item2?.GenderCode</th>
                                <th>@patientPair.Item1?.FamilyStatusCode</th>
                                <th>@patientPair.Item2?.FamilyStatusCode</th>
                                <th>@patientPair.Item1?.LastUpdatedOn</th>
                                <th>@patientPair.Item2?.LastUpdatedOn</th>
                                <th>@patientPair.Item1?.FhirVersion</th>
                                <th>@patientPair.Item2?.FhirVersion</th>
                                <th>@patientPair.Item1?.Telephone2</th>
                                <th>@patientPair.Item2?.Telephone2</th>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
    </div>
</div>

